<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>展示学生信息</title>
<style>
ul.pagination {
    display: inline-block;
    padding: 0;
    margin: 0;
    width:50%;
}
ul.pagination li {
	display: inline;
}
ul.pagination li a {
    color: black;
    float: left;
    padding: 8px 16px;
    text-decoration: none;
    transition: background-color .3s;
    border: 1px solid #ddd;
}
ul.pagination li a.active {
    background-color: #4CAF50;
    color: white;
    border: 1px solid #4CAF50;		/*solid	定义实线*/
}
ul.pagination li a:hover:not(.active) {
	background-color: #ddd;
}
div.nowpage {
	background-color:#aaaaaa;
}
div.center {
	text-align: center;
}
</style>
<script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
<script>
	$(function(){
		var pcount=$('#pageCount').val();
		var psize=$('#pageSize').val();
		var pstart=$('#pageStart').val();
		var username=$('#username').val();
		var nowpage=pstart/psize+1;
		//alert(pstart);
		var cpage=Math.ceil(pcount/psize);
		var strhtml="";
		
		if(cpage<=10){
			for(var i=1;i<=cpage;i++){
				if(i==nowpage){
					strhtml+='<a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+' style="background-color:#aaaaaa">'+i+'</a>';
				}else{
					strhtml+='<span> <a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+'>'+i+'</a></span>';
				}
			}
		}else if(cpage>10 && 1<=nowpage && nowpage<=6){		//pagestart=20 nowpage=11 cpage=15
			//alert("111111===" + nowpage);
			for(var i=1;i<=10;i++){
				if(i==nowpage){
					strhtml+='<a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+' style="background-color:#aaaaaa;font-weight:700">'+i+'</a>';
					//strhtml+='<a href=/userAll?pageStart='+psize*(i-1)+' style="background-color:#aaaaaa"><div class="nowpage">'+i+'</div></a>';
				}else{
					strhtml+='<span> <a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+'>'+i+'</a></span>';
				}
			}
		}else if(cpage>10 && nowpage<=cpage-4){
			//alert("222222===" + nowpage);
			for(var i=nowpage-5;i<=nowpage+4;i++){//6--15
				if(i==nowpage){
					strhtml+='<a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username'+username+' style="background-color:#aaaaaa;font-weight:700">'+i+'</a>';
				}else{
					strhtml+='<span><a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username'+username+'>'+i+'</a></span>';
				}
			}
		}else if(cpage>10 && cpage-4<nowpage && nowpage<=cpage){
			//alert("333333===" + nowpage);
			for(var i=cpage-9;i<=cpage;i++){
				if(i==nowpage){
					strhtml+='<a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+' style="background-color:#aaaaaa;font-weight:700">'+i+'</a>';
				}else{
					strhtml+='<span> <a href=/sysuser/fenyelike?pageStart='+psize*(i-1)+'&username='+username+'>'+i+'</a></span>';
				}
			}
		}else{
			console.error(00000000);
		}
		$("#mydiv").html(strhtml);
		
	})();
</script>
</head>
<body>

 <form action="fenyelike">
用户搜索<input type="text" name="username" th:value="${username}" id="username"/><input type="submit" value="提交">
</form>
<input type="hidden" th:value="${pageCount}" id="pageCount"/>
	<input type="hidden" th:value="${pageSize}" id="pageSize"/>
	<input type="hidden" th:value="${pageStart}" id="pageStart"/> 
	<h3 align="center">展示学生信息</h3> 
	<table border="1" cellspacing="2" align="center">
		<caption></caption>
		<thead>
			<tr>
				<td width="100">学号</td>
				<td width="100">姓名</td>
				<td width="100">密码</td>
				<td width="200">时间</td>
			</tr>
		</thead>
		<tr th:each="user:${sysUserList}">
			<td th:text="${user.id}"></td>
			<td th:text="${user.username}"></td>
			<td th:text="${user.password}"></td>
			<td th:text="${user.ts}"></td>
		</tr>
	</table >
	<div class="center" 
	th:with="pageNext=${pageStart}+${pageSize},
	pagePre=${pageStart}-${pageSize},
	pageL=${pageCount}-(${pageCount}%${pageSize})">
		<ul class="pagination">
			
				<li><span><a th:href="@{'/sysuser/fenyelike?pageStart='+0+'&username'+${username}}">首页</a></span></li>	
				<li><span th:if ="${pagePre} ge '0'"><a 
				th:href="@{'/sysuser/fenyelike?pageStart='+${pagePre}+'&username'+${username}}">上页</a></span></li>
				<li><div id="mydiv"></div></li>
				<li><span th:if ="${pageNext} lt ${pageCount}"><a
				 th:href="@{'/sysuser/fenyelike?pageStart='+${pageNext}+'&username'+${username}}">下页</a></span></li>
				<li><span><a th:href="@{'/sysuser/fenyelike?pageStart='+${pageL}+'&username'+${username}}">末页</a></span></li>	
			
		</ul>
	</div>
</body>
</html>

				
				
				
				
				
				
				
				
				
				
				
				